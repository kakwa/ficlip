matrix:
  include:
    - os: linux
      dist: trusty
      env:
          N=VALGRIND
          VG_CMD=./tests/valgrind_run.sh
    - os: linux
      dist: trusty
      env:
          N=GCOV
    - os: linux
      dist: trusty
      env:
          N=BASE
    - os: osx
      env:
          N=OSX

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then xcode-select --install;true; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update  ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install argp-standalone; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install valgrind; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install libxml2; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install cunit; fi

addons:
  apt:
    packages:
    - cmake
    - time
    - valgrind
    - libcunit1-ncurses-dev
    - libxml2-utils
    - libc6-dev
    - gcc
    - g++

language: cpp

compiler: clang

script: cmake . -DUNITTEST=ON && make && $VG_CMD ./ficlip-test
